<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Donkomi Admin Portal</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="admin-styles.css">
</head>
<body>
    <!-- Login Screen -->
    <div class="admin-container" id="loginScreen">
        <div class="admin-login-card">
            <div class="admin-header">
                <div class="logo-section">
                    <i class="fas fa-shopping-bag"></i>
                    <h1>Donkomi</h1>
                </div>
                <h2>Admin Portal</h2>
                <p>Access your Ghana operations dashboard</p>
            </div>

            <form class="admin-login-form" id="adminLoginForm">
                <div class="form-group">
                    <label for="username">
                        <i class="fas fa-user"></i>
                        Username
                    </label>
                    <input type="text" id="username" name="username" required placeholder="Enter admin username">
                </div>

                <div class="form-group">
                    <label for="password">
                        <i class="fas fa-lock"></i>
                        Password
                    </label>
                    <input type="password" id="password" name="password" required placeholder="Enter admin password">
                </div>

                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="rememberMe" name="rememberMe">
                        <span class="checkmark"></span>
                        Remember me
                    </label>
                </div>

                <button type="submit" class="login-btn">
                    <i class="fas fa-sign-in-alt"></i>
                    Login to Admin Portal
                </button>
            </form>

            <div class="admin-footer">
                <a href="index.html" class="back-to-site">
                    <i class="fas fa-arrow-left"></i>
                    Back to Donkomi
                </a>
                <p class="security-note">
                    <i class="fas fa-shield-alt"></i>
                    Secure admin access for authorized personnel only
                </p>
            </div>
        </div>
    </div>

    <!-- Main Admin Dashboard -->
    <div class="admin-dashboard hidden" id="adminDashboard">
        <!-- Header -->
        <header class="admin-header-dashboard">
            <div class="header-left">
                <div class="logo-section">
                    <i class="fas fa-shopping-bag"></i>
                    <h1>Donkomi Admin</h1>
                </div>
            </div>
            <div class="header-right">
                <div class="admin-info">
                    <span class="admin-name">Admin User</span>
                    <span class="admin-role">Ghana Operations</span>
                </div>
                <button type="button" class="back-to-website-btn" onclick="goToWebsite()" title="Visit main website">
                    <i class="fas fa-external-link-alt"></i>
                    Back to Website
                </button>
                <button type="button" class="logout-btn" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i>
                    Logout
                </button>
            </div>
        </header>

        <!-- Sidebar -->
        <aside class="admin-sidebar">
            <nav class="admin-nav">
                <a href="#dashboard" class="nav-item active" data-section="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#products" class="nav-item" data-section="products">
                    <i class="fas fa-box"></i>
                    <span>Products</span>
                </a>
                <a href="#categories" class="nav-item" data-section="categories">
                    <i class="fas fa-tags"></i>
                    <span>Categories</span>
                </a>
                <a href="#orders" class="nav-item" data-section="orders">
                    <i class="fas fa-shopping-cart"></i>
                    <span>Orders</span>
                </a>
                <a href="#analytics" class="nav-item" data-section="analytics">
                    <i class="fas fa-chart-bar"></i>
                    <span>Analytics</span>
                </a>
                <a href="#messages" class="nav-item" data-section="messages">
                    <i class="fas fa-comments"></i>
                    <span>Messages</span>
                    <span class="message-badge hidden" id="messageBadge">â€¢</span>
                </a>
                <a href="#settings" class="nav-item" data-section="settings">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="admin-main">
            <!-- Dashboard Section -->
            <section id="dashboard" class="admin-section active">
                <div class="section-header">
                    <h2>Dashboard Overview</h2>
                    <p>Welcome to your Ghana operations dashboard</p>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-box"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="totalProducts">0</h3>
                            <p>Total Products</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="totalOrders">0</h3>
                            <p>Total Orders</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-tags"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="totalCategories">0</h3>
                            <p>Categories</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="totalRevenue">â‚µ0</h3>
                            <p>Total Revenue</p>
                        </div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <h3>Recent Orders</h3>
                        <div class="recent-orders" id="recentOrders">
                            <p>No recent orders</p>
                        </div>
                    </div>
                    <div class="dashboard-card">
                        <h3>Quick Actions</h3>
                        <div class="quick-actions">
                            <button type="button" class="action-btn" onclick="showSection('products')">
                                <i class="fas fa-plus"></i>
                                Add Product
                            </button>
                            <button type="button" class="action-btn" onclick="showSection('categories')">
                                <i class="fas fa-folder-plus"></i>
                                Add Category
                            </button>
                            <button type="button" class="action-btn" onclick="showSection('orders')">
                                <i class="fas fa-eye"></i>
                                View Orders
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Products Section -->
            <section id="products" class="admin-section">
                <div class="section-header">
                    <h2>Product Management</h2>
                    <button type="button" class="btn-primary" onclick="showAddProductModal()">
                        <i class="fas fa-plus"></i>
                        Add New Product
                    </button>
                </div>

                <div class="products-controls">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="productSearch" placeholder="Search products...">
                    </div>
                    <div class="filter-controls">
                        <select id="categoryFilter" title="Filter products by category">
                            <option value="">All Categories</option>
                        </select>
                        <select id="sortProducts" title="Sort products by criteria">
                            <option value="name">Sort by Name</option>
                            <option value="price">Sort by Price</option>
                            <option value="date">Sort by Date</option>
                        </select>
                    </div>
                </div>

                <div class="products-grid" id="productsGrid">
                    <!-- Products will be loaded here -->
                </div>
            </section>

            <!-- Categories Section -->
            <section id="categories" class="admin-section">
                <div class="section-header">
                    <h2>Category Management</h2>
                    <button type="button" class="btn-primary" onclick="showAddCategoryModal()">
                        <i class="fas fa-plus"></i>
                        Add New Category
                    </button>
                </div>

                <div class="categories-grid" id="categoriesGrid">
                    <!-- Categories will be loaded here -->
                </div>
            </section>

            <!-- Orders Section -->
            <section id="orders" class="admin-section">
                <div class="section-header">
                    <h2>Order Management</h2>
                </div>

                <div class="orders-controls">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="orderSearch" placeholder="Search orders...">
                    </div>
                    <div class="filter-controls">
                        <select id="statusFilter" title="Filter orders by status">
                            <option value="">All Status</option>
                            <option value="pending">Pending</option>
                            <option value="processing">Processing</option>
                            <option value="shipped">Shipped</option>
                            <option value="delivered">Delivered</option>
                            <option value="cancelled">Cancelled</option>
                        </select>
                    </div>
                </div>

                <div class="orders-table" id="ordersTable">
                    <!-- Orders will be loaded here -->
                </div>
            </section>

            <!-- Analytics Section -->
            <section id="analytics" class="admin-section">
                <div class="section-header">
                    <h2>Analytics & Reports</h2>
                </div>
                
                <div class="analytics-grid">
                    <div class="analytics-card">
                        <h3>Sales Overview</h3>
                        <div class="chart-placeholder">
                            <i class="fas fa-chart-line"></i>
                            <p>Sales chart will be displayed here</p>
                        </div>
                    </div>
                    <div class="analytics-card">
                        <h3>Top Products</h3>
                        <div class="top-products" id="topProducts">
                            <p>No data available</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Messages Section -->
            <section id="messages" class="admin-section">
                <div class="section-header">
                    <h2>Customer Messages</h2>
                    <p>Chat with your customers in real-time</p>
                </div>
                
                <div class="chat-dashboard">
                    <div class="chat-conversations">
                        <div class="conversations-header">
                            <h3>Conversations</h3>
                            <span class="active-indicator" id="activeConversations">0 active</span>
                        </div>
                        <div class="conversations-list" id="conversationsList">
                            <div class="empty-conversations">
                                <i class="fas fa-comments"></i>
                                <p>No conversations yet</p>
                                <span>Customer messages will appear here</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="chat-window">
                        <div class="chat-window-header" id="chatWindowHeader">
                            <div class="chat-user-info">
                                <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face" alt="User" class="chat-user-avatar" id="chatUserAvatar">
                                <div class="chat-user-details">
                                    <h4 id="chatUserName">Select a conversation</h4>
                                    <span id="chatUserStatus">to start chatting</span>
                                </div>
                            </div>
                            <div class="chat-actions">
                                <button type="button" class="chat-action-btn" title="User Info">
                                    <i class="fas fa-info-circle"></i>
                                </button>
                                <button type="button" class="chat-action-btn" title="Clear Chat">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="chat-messages" id="adminChatMessages">
                            <div class="chat-welcome">
                                <i class="fas fa-comments"></i>
                                <h3>Welcome to Customer Support</h3>
                                <p>Select a conversation from the left to start chatting with customers.</p>
                            </div>
                        </div>
                        
                        <div class="chat-input-area hidden" id="chatInputArea">
                            <div class="chat-input-container">
                                <input type="text" id="adminChatInput" placeholder="Type your message..." title="Type your message">
                                <button type="button" id="adminSendBtn" onclick="sendAdminMessage()" title="Send message">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settings" class="admin-section">
                <div class="section-header">
                    <h2>Admin Settings</h2>
                </div>
                
                <div class="settings-grid">
                    <div class="settings-card">
                        <h3>Profile Settings</h3>
                        <form class="settings-form">
                            <div class="form-group">
                                <label for="adminName">Admin Name</label>
                                <input type="text" id="adminName" value="Admin User">
                            </div>
                            <div class="form-group">
                                <label for="adminEmail">Email</label>
                                <input type="email" id="adminEmail" value="admin@donkomi.com">
                            </div>
                            <button type="submit" class="btn-primary">Update Profile</button>
                        </form>
                    </div>
                    <div class="settings-card">
                        <h3>System Settings</h3>
                        <div class="setting-item">
                            <label for="enableNotifications">Enable Notifications</label>
                            <input type="checkbox" id="enableNotifications" checked>
                        </div>
                        <div class="setting-item">
                            <label for="autoSaveProducts">Auto-save Products</label>
                            <input type="checkbox" id="autoSaveProducts" checked>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Add Product Modal -->
    <div class="modal" id="addProductModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Product</h3>
                <button type="button" class="close-modal" onclick="closeModal('addProductModal')" title="Close modal">&times;</button>
            </div>
            <form class="modal-form" id="addProductForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="productName">Product Name *</label>
                        <input type="text" id="productName" name="name" title="Enter product name" placeholder="Enter product name" required>
                    </div>
                    <div class="form-group">
                        <label for="productCategory">Category *</label>
                        <select id="productCategory" name="category" title="Select product category" required>
                            <option value="">Select Category</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="productPrice">Price (â‚µ) *</label>
                        <input type="number" id="productPrice" name="price" step="0.01" title="Enter product price" placeholder="0.00" required>
                    </div>
                    <div class="form-group">
                        <label for="productOriginalPrice">Original Price (â‚µ)</label>
                        <input type="number" id="productOriginalPrice" name="originalPrice" step="0.01" title="Enter original price (optional)" placeholder="0.00">
                    </div>
                </div>

                <div class="form-group">
                    <label for="productDescription">Description</label>
                    <textarea id="productDescription" name="description" rows="3" title="Enter product description" placeholder="Enter product description"></textarea>
                </div>

                <div class="form-group">
                    <label for="productImage">Product Image *</label>
                    <div class="image-upload">
                        <input type="file" id="productImage" name="image" accept="image/*" title="Select product image" required>
                        <div class="upload-preview">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <p>Click to upload image</p>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="productBadge">Badge</label>
                    <select id="productBadge" name="badge" title="Select product badge (optional)">
                        <option value="">No Badge</option>
                        <option value="Popular">Popular</option>
                        <option value="New">New</option>
                        <option value="Premium">Premium</option>
                        <option value="Sale">Sale</option>
                    </select>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="closeModal('addProductModal')">Cancel</button>
                    <button type="submit" class="btn-primary">Add Product</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Category Modal -->
    <div class="modal" id="addCategoryModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Category</h3>
                <button type="button" class="close-modal" onclick="closeModal('addCategoryModal')" title="Close modal">&times;</button>
            </div>
            <form class="modal-form" id="addCategoryForm">
                <div class="form-group">
                    <label for="categoryName">Category Name *</label>
                    <input type="text" id="categoryName" name="name" title="Enter category name" placeholder="Enter category name" required>
                </div>
                
                <div class="form-group">
                    <label for="parentCategory">Parent Category</label>
                    <select id="parentCategory" name="parentCategory" title="Select parent category (optional)">
                        <option value="">No Parent (Main Category)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="categoryIcon">Category Icon *</label>
                    <select id="categoryIcon" name="icon" title="Select category icon" required>
                        <option value="">Select Icon</option>
                        <option value="fas fa-heart">Health & Beauty</option>
                        <option value="fas fa-laptop">Electronics</option>
                        <option value="fas fa-car">Vehicles</option>
                        <option value="fas fa-seedling">Agriculture</option>
                        <option value="fas fa-tools">Tools</option>
                        <option value="fas fa-tshirt">Fashion</option>
                        <option value="fas fa-home">Home & Garden</option>
                        <option value="fas fa-gamepad">Gaming</option>
                        <option value="fas fa-book">Books</option>
                        <option value="fas fa-dumbbell">Sports</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="categoryColor">Category Color</label>
                        <select id="categoryColor" name="color" title="Select category color">
                            <option value="health">Health (Orange)</option>
                            <option value="beauty">Beauty (Pink)</option>
                            <option value="electronics">Electronics (Blue)</option>
                            <option value="vehicles">Vehicles (Red)</option>
                            <option value="agriculture">Agriculture (Green)</option>
                            <option value="tools">Tools (Gray)</option>
                        </select>
                </div>

                <div class="form-group">
                    <label for="categoryDescription">Description</label>
                    <textarea id="categoryDescription" name="description" rows="3" title="Enter category description" placeholder="Enter category description"></textarea>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="closeModal('addCategoryModal')">Cancel</button>
                    <button type="submit" class="btn-primary">Add Category</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Product Modal -->
    <div class="modal" id="editProductModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit Product</h3>
                <button type="button" class="close-modal" onclick="closeModal('editProductModal')" title="Close modal">&times;</button>
            </div>
            <form class="modal-form" id="editProductForm">
                <input type="hidden" name="productId">
                <div class="form-row">
                    <div class="form-group">
                        <label for="editProductName">Product Name *</label>
                        <input type="text" id="editProductName" name="name" title="Enter product name" placeholder="Enter product name" required>
                    </div>
                    <div class="form-group">
                        <label for="editProductCategory">Category *</label>
                        <select id="editProductCategory" name="category" title="Select product category" required>
                            <option value="">Select Category</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="editProductPrice">Price (â‚µ) *</label>
                        <input type="number" id="editProductPrice" name="price" step="0.01" title="Enter product price" placeholder="0.00" required>
                    </div>
                    <div class="form-group">
                        <label for="editProductOriginalPrice">Original Price (â‚µ)</label>
                        <input type="number" id="editProductOriginalPrice" name="originalPrice" step="0.01" title="Enter original price (optional)" placeholder="0.00">
                    </div>
                </div>

                <div class="form-group">
                    <label for="editProductDescription">Description</label>
                    <textarea id="editProductDescription" name="description" rows="3" title="Enter product description" placeholder="Enter product description"></textarea>
                </div>

                <div class="form-group">
                    <label for="editProductImage">Product Image</label>
                    <div class="image-upload">
                        <input type="file" id="editProductImage" name="image" accept="image/*" title="Select new product image">
                        <div class="upload-preview">
                            <img id="currentProductImage" src="" alt="">
                            <p>Click to change image</p>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="editProductBadge">Badge</label>
                    <select id="editProductBadge" name="badge" title="Select product badge (optional)">
                        <option value="">No Badge</option>
                        <option value="Popular">Popular</option>
                        <option value="New">New</option>
                        <option value="Premium">Premium</option>
                        <option value="Sale">Sale</option>
                    </select>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="closeModal('editProductModal')">Cancel</button>
                    <button type="submit" class="btn-primary">Update Product</button>
                </div>
            </form>
        </div>
    </div>

    <script src="admin.js"></script>
    <script>
        // Initialize ProductDatabaseSync for admin panel
        class ProductDatabaseSync {
            constructor() {
                this.storageKey = 'donkomi-product-database';
                this.init();
            }

            init() {
                this.loadFromStorage();
            }

            loadFromStorage() {
                try {
                    const stored = localStorage.getItem(this.storageKey);
                    if (stored) {
                        const parsedDatabase = JSON.parse(stored);
                        // Merge with existing database to preserve default products
                        productDatabase = { ...productDatabase, ...parsedDatabase };
                        console.log('ðŸ“¦ Admin: Product database loaded from localStorage:', Object.keys(productDatabase).length, 'categories');
                        
                        // Count total products
                        let totalProducts = 0;
                        Object.keys(productDatabase).forEach(category => {
                            totalProducts += productDatabase[category].length;
                        });
                        console.log('ðŸ“Š Admin: Total products loaded:', totalProducts);
                    } else {
                        // No stored data, save current default products to localStorage
                        console.log('ðŸ“¦ Admin: No stored data found, initializing with default products');
                        this.saveToStorage();
                    }
                } catch (error) {
                    console.error('âŒ Admin: Error loading product database from localStorage:', error);
                }
            }

            saveToStorage() {
                try {
                    localStorage.setItem(this.storageKey, JSON.stringify(productDatabase));
                    console.log('ðŸ’¾ Admin: Product database saved to localStorage');
                } catch (error) {
                    console.error('âŒ Admin: Error saving product database to localStorage:', error);
                }
            }

            addProduct(product) {
                const category = product.category;
                if (!productDatabase[category]) {
                    productDatabase[category] = [];
                }
                
                // Generate unique ID if not provided
                if (!product.id) {
                    product.id = 'admin_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                }
                
                productDatabase[category].push(product);
                this.saveToStorage();
                console.log('âœ… Admin: Product added:', product.name, 'to category:', category);
                console.log('ðŸ“Š Admin: Category now has', productDatabase[category].length, 'products');
                
                // Trigger storage event manually for same-tab updates
                this.triggerStorageEvent();
                return true;
            }
            
            triggerStorageEvent() {
                // Dispatch storage event to notify main website
                window.dispatchEvent(new StorageEvent('storage', {
                    key: this.storageKey,
                    newValue: JSON.stringify(productDatabase),
                    url: window.location.href
                }));
                console.log('ðŸ”” Admin: Storage event dispatched for main website sync');
            }

            updateProduct(productId, updatedProduct) {
                for (const category in productDatabase) {
                    const productIndex = productDatabase[category].findIndex(p => p.id === productId);
                    if (productIndex !== -1) {
                        // Keep the existing image if no new image provided
                        if (!updatedProduct.image) {
                            updatedProduct.image = productDatabase[category][productIndex].image;
                        }
                        productDatabase[category][productIndex] = { ...productDatabase[category][productIndex], ...updatedProduct };
                        this.saveToStorage();
                        console.log('âœ… Admin: Product updated:', updatedProduct.name);
                        this.triggerStorageEvent();
                        return true;
                    }
                }
                return false;
            }

            deleteProduct(productId) {
                for (const category in productDatabase) {
                    const productIndex = productDatabase[category].findIndex(p => p.id === productId);
                    if (productIndex !== -1) {
                        const deletedProduct = productDatabase[category].splice(productIndex, 1)[0];
                        this.saveToStorage();
                        console.log('âœ… Admin: Product deleted:', deletedProduct.name);
                        this.triggerStorageEvent();
                        return true;
                    }
                }
                return false;
            }

            getAllProducts() {
                const allProducts = [];
                for (const category in productDatabase) {
                    allProducts.push(...productDatabase[category].map(product => ({
                        ...product,
                        category: category
                    })));
                }
                return allProducts;
            }

            getProductsByCategory(category) {
                return productDatabase[category] || [];
            }

            getCategories() {
                return Object.keys(productDatabase);
            }

            addCategory(category) {
                if (!productDatabase[category.name]) {
                    productDatabase[category.name] = [];
                    this.saveToStorage();
                    console.log('âœ… Admin: Category added:', category.name);
                    this.triggerStorageEvent();
                    return true;
                }
                return false;
            }

            deleteCategory(categoryName) {
                if (productDatabase[categoryName]) {
                    delete productDatabase[categoryName];
                    this.saveToStorage();
                    console.log('âœ… Admin: Category deleted:', categoryName);
                    this.triggerStorageEvent();
                    return true;
                }
                return false;
            }
        }

        // Complete product database with ALL 112 products (identical to main website)
        let productDatabase = {
            'vitamins': [
                { id: 1, name: "Vitamin C 1000mg Tablets", price: 45.99, originalPrice: 65.99, image: "https://images.unsplash.com/photo-1584308666744-24d5c474f2ae?w=300&h=300&fit=crop", description: "High-potency Vitamin C for immune support", badge: "Popular" },
                { id: 2, name: "Omega-3 Fish Oil Capsules", price: 89.99, originalPrice: 120.99, image: "https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=300&h=300&fit=crop", description: "Premium fish oil for heart health" },
                { id: 3, name: "Multivitamin for Women", price: 67.50, originalPrice: 85.00, image: "https://images.unsplash.com/photo-1607619056574-7b8d3ee536b2?w=300&h=300&fit=crop", description: "Complete daily nutrition for women" },
                { id: 4, name: "Vitamin D3 5000 IU", price: 32.99, originalPrice: 42.99, image: "https://images.unsplash.com/photo-1559757175-0eb30cd8c063?w=300&h=300&fit=crop", description: "Bone health and immune support" }
            ],
            'fragrances': [
                { id: 5, name: "Chanel No. 5 Eau de Parfum", price: 299.99, originalPrice: 350.00, image: "https://images.unsplash.com/photo-1541643600914-78b084683601?w=300&h=300&fit=crop", description: "Classic French perfume", badge: "Premium" },
                { id: 6, name: "Dior Sauvage Men's Cologne", price: 245.00, originalPrice: 280.00, image: "https://images.unsplash.com/photo-1592945403244-b3fbafd7f539?w=300&h=300&fit=crop", description: "Fresh and bold masculine scent" },
                { id: 7, name: "Victoria's Secret Body Mist", price: 45.99, originalPrice: 55.99, image: "https://images.unsplash.com/photo-1594035910387-fea47794261f?w=300&h=300&fit=crop", description: "Light and refreshing body spray" },
                { id: 8, name: "Tom Ford Black Orchid", price: 189.99, originalPrice: 220.00, image: "https://images.unsplash.com/photo-1585386959984-a4155224a1ad?w=300&h=300&fit=crop", description: "Luxurious unisex fragrance" }
            ],
            'face-care': [
                { id: 9, name: "Cetaphil Daily Facial Cleanser", price: 25.99, originalPrice: 32.99, image: "https://images.unsplash.com/photo-1556228578-8c89e6adf883?w=300&h=300&fit=crop", description: "Gentle cleanser for all skin types", badge: "Best Seller" },
                { id: 10, name: "Olay Regenerist Micro-Sculpting Cream", price: 78.99, originalPrice: 95.99, image: "https://images.unsplash.com/photo-1570194065650-d99fb4bedf0a?w=300&h=300&fit=crop", description: "Anti-aging moisturizer with peptides" },
                { id: 11, name: "The Ordinary Hyaluronic Acid Serum", price: 18.99, originalPrice: 24.99, image: "https://images.unsplash.com/photo-1620916566398-39f1143ab7be?w=300&h=300&fit=crop", description: "Intensive hydration serum", badge: "Trending" },
                { id: 12, name: "Neutrogena Retinol Oil", price: 34.99, originalPrice: 44.99, image: "https://images.unsplash.com/photo-1596755389378-c31d21fd1273?w=300&h=300&fit=crop", description: "Anti-aging facial oil" }
            ],
            'hair-beauty': [
                { id: 13, name: "L'OrÃ©al Professional Shampoo", price: 35.99, originalPrice: 45.99, image: "https://images.unsplash.com/photo-1571875257727-256c39da42af?w=300&h=300&fit=crop", description: "Professional salon-quality shampoo" },
                { id: 14, name: "Dyson Hair Dryer Supersonic", price: 899.99, originalPrice: 1099.99, image: "https://images.unsplash.com/photo-1522337360788-8b13dee7a37e?w=300&h=300&fit=crop", description: "Fast drying with intelligent heat control", badge: "Premium" },
                { id: 15, name: "Argan Oil Hair Treatment", price: 24.99, originalPrice: 32.99, image: "https://images.unsplash.com/photo-1559599189-7d5e31afd857?w=300&h=300&fit=crop", description: "Moroccan argan oil for hair repair" },
                { id: 16, name: "Ceramic Hair Straightener", price: 129.99, originalPrice: 159.99, image: "https://images.unsplash.com/photo-1457972729786-0411a3b2b626?w=300&h=300&fit=crop", description: "Professional ceramic straightening iron" }
            ],
            'body-care': [
                { id: 17, name: "Body Care Gift Set", price: 67.99, originalPrice: 79.99, image: "https://images.unsplash.com/photo-1571781926291-c477ebfd024b?w=300&h=300&fit=crop", description: "Complete body care routine" },
                { id: 18, name: "Dove Deep Moisture Body Wash", price: 8.99, originalPrice: 12.99, image: "https://images.unsplash.com/photo-1556228720-195a672e8a03?w=300&h=300&fit=crop", description: "Nourishing body wash" },
                { id: 19, name: "Bath & Body Works Lotion", price: 16.99, originalPrice: 22.99, image: "https://images.unsplash.com/photo-1615397349754-cfa2066a298e?w=300&h=300&fit=crop", description: "Moisturizing body lotion" },
                { id: 20, name: "Exfoliating Body Scrub", price: 29.99, originalPrice: 39.99, image: "https://images.unsplash.com/photo-1588159343745-445ae0ee6b94?w=300&h=300&fit=crop", description: "Sea salt body scrub" }
            ],
            'sexual-wellness': [
                { id: 21, name: "Wellness Intimacy Kit", price: 54.99, originalPrice: 69.99, image: "https://images.unsplash.com/photo-1609205071652-0dfcc8b85dd8?w=300&h=300&fit=crop", description: "Complete wellness and care kit" },
                { id: 22, name: "Personal Care Products", price: 29.99, originalPrice: 39.99, image: "https://images.unsplash.com/photo-1571019613540-996a0dba5ba6?w=300&h=300&fit=crop", description: "Premium personal care items" }
            ],
            'oral-care': [
                { id: 23, name: "Oral-B Electric Toothbrush", price: 129.99, originalPrice: 159.99, image: "https://images.unsplash.com/photo-1607613009820-a29f7bb81c04?w=300&h=300&fit=crop", description: "Professional clean with smart timer" },
                { id: 24, name: "Whitening Toothpaste Set", price: 24.99, originalPrice: 32.99, image: "https://images.unsplash.com/photo-1609840114855-9755dfb8d542?w=300&h=300&fit=crop", description: "Professional whitening system" }
            ],
            'makeup': [
                { id: 25, name: "MAC Lipstick Collection", price: 89.99, originalPrice: 109.99, image: "https://images.unsplash.com/photo-1586495777744-4413f21062fa?w=300&h=300&fit=crop", description: "Professional lipstick set", badge: "Trending" },
                { id: 26, name: "Eyeshadow Palette", price: 45.99, originalPrice: 59.99, image: "https://images.unsplash.com/photo-1583241800109-c8e0dea6b465?w=300&h=300&fit=crop", description: "120 color eyeshadow palette" }
            ],
            'tools-accessories': [
                { id: 27, name: "Professional Hair Clipper Set", price: 89.99, originalPrice: 109.99, image: "https://images.unsplash.com/photo-1503951914875-452162b0f3f1?w=300&h=300&fit=crop", description: "Complete barbering kit" },
                { id: 28, name: "Manicure Kit Professional", price: 34.99, originalPrice: 44.99, image: "https://images.unsplash.com/photo-1599948128421-4d4e4b1f3987?w=300&h=300&fit=crop", description: "Complete nail care set" }
            ],
            'electronics-accessories': [
                { id: 41, name: "Smartphone Accessories Kit", price: 39.99, originalPrice: 49.99, image: "https://images.unsplash.com/photo-1512499617640-c74ae3a79d37?w=300&h=300&fit=crop", description: "Complete phone accessory bundle" },
                { id: 42, name: "Wireless Charger Pad", price: 29.99, originalPrice: 39.99, image: "https://images.unsplash.com/photo-1609691174988-9d7ec8d51d82?w=300&h=300&fit=crop", description: "Fast wireless charging pad" },
                { id: 73, name: "USB-C Cable 6ft", price: 19.99, originalPrice: 24.99, image: "https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=300&h=300&fit=crop", description: "Fast charging USB-C cable" },
                { id: 74, name: "Wireless Charging Pad", price: 45.99, originalPrice: 59.99, image: "https://images.unsplash.com/photo-1515378791036-0648a814c963?w=300&h=300&fit=crop", description: "Fast wireless charging station", badge: "Popular" },
                { id: 75, name: "Power Bank 20000mAh", price: 89.99, originalPrice: 109.99, image: "https://images.unsplash.com/photo-1609592913750-71717ee0ff3b?w=300&h=300&fit=crop", description: "High capacity portable charger" },
                { id: 76, name: "Phone Car Mount", price: 24.99, originalPrice: 34.99, image: "https://images.unsplash.com/photo-1512499617640-c74ae3a79d37?w=300&h=300&fit=crop", description: "Adjustable smartphone car holder" }
            ],
            'computer-accessories': [
                { id: 43, name: "Wireless Gaming Mouse", price: 79.99, originalPrice: 99.99, image: "https://images.unsplash.com/photo-1527864550417-7fd91fc51a46?w=300&h=300&fit=crop", description: "High-precision gaming mouse" },
                { id: 44, name: "Mechanical Keyboard RGB", price: 149.99, originalPrice: 179.99, image: "https://images.unsplash.com/photo-1601445638532-3c6f6c3aa1d6?w=300&h=300&fit=crop", description: "Professional gaming keyboard" },
                { id: 77, name: "Mechanical Gaming Keyboard", price: 159.99, originalPrice: 199.99, image: "https://images.unsplash.com/photo-1541140532154-b024d705b90a?w=300&h=300&fit=crop", description: "RGB backlit mechanical keyboard", badge: "Gaming" },
                { id: 78, name: "Gaming Mouse RGB", price: 79.99, originalPrice: 99.99, image: "https://images.unsplash.com/photo-1527814050087-3793815479db?w=300&h=300&fit=crop", description: "High precision gaming mouse" },
                { id: 79, name: "Monitor Stand Dual", price: 129.99, originalPrice: 159.99, image: "https://images.unsplash.com/photo-1616627547584-bf28cfeea7d5?w=300&h=300&fit=crop", description: "Adjustable dual monitor stand" },
                { id: 80, name: "USB Hub 7-Port", price: 34.99, originalPrice: 44.99, image: "https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=300&h=300&fit=crop", description: "High-speed USB 3.0 hub" }
            ],
            'networking': [
                { id: 45, name: "WiFi 6 Router", price: 199.99, originalPrice: 249.99, image: "https://images.unsplash.com/photo-1606904825846-647eb07f5be2?w=300&h=300&fit=crop", description: "High-speed mesh WiFi router" },
                { id: 46, name: "Network Switch 8-Port", price: 89.99, originalPrice: 109.99, image: "https://images.unsplash.com/photo-1558618047-3c8c76ca7d13?w=300&h=300&fit=crop", description: "Gigabit Ethernet switch" },
                { id: 81, name: "WiFi 6 Router AX6000", price: 299.99, originalPrice: 349.99, image: "https://images.unsplash.com/photo-1606904825846-647eb6e8f8b4?w=300&h=300&fit=crop", description: "High-speed WiFi 6 router", badge: "New" },
                { id: 82, name: "Mesh WiFi System 3-Pack", price: 449.99, originalPrice: 549.99, image: "https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=300&h=300&fit=crop", description: "Whole home mesh coverage" },
                { id: 83, name: "Ethernet Switch 8-Port", price: 89.99, originalPrice: 109.99, image: "https://images.unsplash.com/photo-1516110833967-0b5716ca75d4?w=300&h=300&fit=crop", description: "Gigabit Ethernet switch" },
                { id: 84, name: "WiFi Range Extender", price: 79.99, originalPrice: 99.99, image: "https://images.unsplash.com/photo-1606904825846-647eb6e8f8b4?w=300&h=300&fit=crop", description: "Boost your WiFi signal" }
            ],
            'tv-dvd': [
                { id: 29, name: "Samsung 55\" 4K Smart TV", price: 1299.99, originalPrice: 1599.99, image: "https://images.unsplash.com/photo-1593359677879-a4bb92f829d1?w=300&h=300&fit=crop", description: "Crystal UHD with Tizen smart platform", badge: "Hot Deal" },
                { id: 30, name: "Sony Blu-ray DVD Player", price: 189.99, originalPrice: 229.99, image: "https://images.unsplash.com/photo-1518855589321-c19800f7d692?w=300&h=300&fit=crop", description: "4K upscaling Blu-ray player" },
                { id: 31, name: "LG OLED 65\" TV", price: 2899.99, originalPrice: 3299.99, image: "https://images.unsplash.com/photo-1567690187548-f07b1d7bf5a9?w=300&h=300&fit=crop", description: "Self-lit pixels for perfect blacks", badge: "Premium" },
                { id: 32, name: "Universal Remote Control", price: 39.99, originalPrice: 49.99, image: "https://images.unsplash.com/photo-1558560557-7dbb98b4b3da?w=300&h=300&fit=crop", description: "Control all your devices" }
            ],
            'audio-music': [
                { id: 33, name: "Bose QuietComfort Headphones", price: 349.99, originalPrice: 399.99, image: "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=300&h=300&fit=crop", description: "World-class noise cancellation", badge: "Popular" },
                { id: 34, name: "Marshall Stanmore II Speaker", price: 449.99, originalPrice: 499.99, image: "https://images.unsplash.com/photo-1608043152269-423dbba4e7e1?w=300&h=300&fit=crop", description: "Iconic rock and roll speaker" },
                { id: 35, name: "Audio-Technica Turntable", price: 299.99, originalPrice: 349.99, image: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300&h=300&fit=crop", description: "Professional direct-drive turntable" },
                { id: 36, name: "Wireless Earbuds Pro", price: 199.99, originalPrice: 249.99, image: "https://images.unsplash.com/photo-1572569511254-d8f925fe2cbb?w=300&h=300&fit=crop", description: "Premium wireless earbuds" }
            ],
            'laptops-computers': [
                { id: 37, name: "MacBook Pro 14\" M3", price: 3499.99, originalPrice: 3799.99, image: "https://images.unsplash.com/photo-1496181133206-80ce9b88a853?w=300&h=300&fit=crop", description: "Latest M3 chip with 16GB RAM", badge: "New" },
                { id: 38, name: "Dell XPS 13 Laptop", price: 1899.99, originalPrice: 2199.99, image: "https://images.unsplash.com/photo-1593642702821-c8da6771f0c6?w=300&h=300&fit=crop", description: "Ultra-thin with InfinityEdge display" },
                { id: 39, name: "Gaming Desktop PC RTX 4080", price: 2799.99, originalPrice: 3199.99, image: "https://images.unsplash.com/photo-1587831990711-23ca6441447b?w=300&h=300&fit=crop", description: "High-performance gaming rig", badge: "Gaming" },
                { id: 40, name: "iPad Pro 12.9\"", price: 1299.99, originalPrice: 1499.99, image: "https://images.unsplash.com/photo-1544244015-0df4b3ffc6b0?w=300&h=300&fit=crop", description: "Professional tablet with M2 chip" }
            ],
            'printers-scanners': [],
            'security-surveillance': [],
            'computer-hardware': [],
            'vehicle-parts': [],
            'cars': [
                { id: 53, name: "Toyota Camry 2023", price: 45999.99, originalPrice: 48999.99, image: "https://images.unsplash.com/photo-1555215695-3004980ad54e?w=300&h=300&fit=crop", description: "Reliable sedan with hybrid option", badge: "Certified" },
                { id: 54, name: "Honda Accord 2024", price: 42999.99, originalPrice: 45999.99, image: "https://images.unsplash.com/photo-1580274947049-80561d52b088?w=300&h=300&fit=crop", description: "Comfortable midsize sedan" },
                { id: 55, name: "BMW 3 Series 2023", price: 78999.99, originalPrice: 82999.99, image: "https://images.unsplash.com/photo-1555215695-3004980ad54e?w=300&h=300&fit=crop", description: "Luxury sports sedan", badge: "Luxury" }
            ],
            'motorcycles': [],
            'trucks-trailers': [],
            'buses': [],
            'construction-machinery': [],
            'watercraft': [],
            'food-beverages': [
                { id: 64, name: "Premium Ghanaian Cocoa Powder", price: 24.99, originalPrice: 29.99, image: "https://images.unsplash.com/photo-1511381939415-e44015466834?w=300&h=300&fit=crop", description: "100% pure Ghanaian cocoa", badge: "Local" },
                { id: 65, name: "Shea Butter (Raw)", price: 18.99, originalPrice: 22.99, image: "https://images.unsplash.com/photo-1585652757173-57de5e9fab42?w=300&h=300&fit=crop", description: "Unrefined shea butter from Northern Ghana", badge: "Organic" },
                { id: 66, name: "Gari (Cassava Flakes)", price: 12.50, originalPrice: 15.00, image: "https://images.unsplash.com/photo-1586201375761-83865001e31c?w=300&h=300&fit=crop", description: "Traditional Ghanaian staple food" }
            ],
            'farm-machinery': [],
            'feeds-supplements': [],
            'farm-animals': []
        };

        // Initialize the sync system
        const productSync = new ProductDatabaseSync();
        window.productSync = productSync;
        
        console.log('ðŸ”„ Admin: Product sync system initialized');
        
        // Test storage event trigger
        function testStorageSync() {
            console.log('ðŸ§ª ADMIN: Testing storage sync...');
            console.log('ðŸ“Š ADMIN: Current products in database:', productSync.getAllProducts().length);
            
            // Verify we're using the correct storage key
            const stored = localStorage.getItem('donkomi-product-database');
            if (stored) {
                console.log('âœ… ADMIN: Storage key "donkomi-product-database" found with data');
                try {
                    const parsed = JSON.parse(stored);
                    let totalStored = 0;
                    Object.keys(parsed).forEach(category => {
                        totalStored += parsed[category].length;
                    });
                    console.log('ðŸ“Š ADMIN: Total products in storage:', totalStored);
                } catch (e) {
                    console.error('âŒ ADMIN: Error parsing stored data:', e);
                }
            } else {
                console.log('âš ï¸ ADMIN: Storage key "donkomi-product-database" not found - will create on first product add');
            }
        }
        
        // Add test product function for debugging
        function addTestProduct() {
            const testProduct = {
                name: "Test Product " + Date.now(),
                category: "vitamins",
                price: 19.99,
                originalPrice: 24.99,
                description: "This is a test product added by admin",
                image: "https://images.unsplash.com/photo-1584308666744-24d5c474f2ae?w=300&h=300&fit=crop",
                badge: "Test"
            };
            
            if (window.productSync) {
                console.log('ðŸ§ª ADMIN: Adding test product...');
                window.productSync.addProduct(testProduct);
                console.log('âœ… ADMIN: Test product added successfully');
            }
        }
        
        // Make test function globally available
        window.addTestProduct = addTestProduct;
        
        // Run test after a short delay to let everything initialize
        setTimeout(testStorageSync, 1000);
    </script>
</body>
</html>
